# file opened: C:\Users\luisx\OneDrive - UFV\curso2\AOC\ejerYpruebas\L34-Parte1\pantallaJuego.asm
  1   0000 C5               PUSH BC
  1   0001 E5             PUSH HL
  1   0002 D5             PUSH DE
  1   0003 F5             PUSH AF
  2   0004
  3   0004 21 A5 58         LD HL, $58A5
  4   0007 3E 00            LD A, 0
  5   0009 CD 19 00         CALL SET_GRID_EMPTY
  6   000C 21 A5 40         LD HL, $40A5
  7   000F CD 2F 00         CALL DRAW_EMPTY_CIRCLES
  8   0012 CD 3A 02         CALL SET_PRED
  9   0015 CD 52 02         CALL SET_PYEL
 10   0018 C9               RET
 11   0019
 12   0019              SET_GRID_EMPTY:
 13   0019 CD 6F 00         CALL SET_COLUMN_COLOR
 14   001C CD 6F 00         CALL SET_COLUMN_COLOR
 15   001F CD 6F 00         CALL SET_COLUMN_COLOR
 16   0022 CD 6F 00         CALL SET_COLUMN_COLOR
 17   0025 CD 6F 00         CALL SET_COLUMN_COLOR
 18   0028 CD 6F 00         CALL SET_COLUMN_COLOR
 19   002B CD 6F 00         CALL SET_COLUMN_COLOR
 20   002E C9               RET
 21   002F
 22   002F              DRAW_EMPTY_CIRCLES:
 23   002F CD 45 00         CALL DRAW_CIRCLE_COLUMN
 24   0032 CD 45 00         CALL DRAW_CIRCLE_COLUMN
 25   0035 CD 45 00         CALL DRAW_CIRCLE_COLUMN
 26   0038 CD 45 00         CALL DRAW_CIRCLE_COLUMN
 27   003B CD 45 00         CALL DRAW_CIRCLE_COLUMN
 28   003E CD 45 00         CALL DRAW_CIRCLE_COLUMN
 29   0041 CD 45 00         CALL DRAW_CIRCLE_COLUMN
 30   0044 C9               RET
 31   0045
 32   0045              DRAW_CIRCLE_COLUMN:
 33   0045 CD 86 00         CALL DRAW_CIRCLE
 34   0048 CD 86 00         CALL DRAW_CIRCLE
 35   004B CD 86 00         CALL DRAW_CIRCLE
 36   004E CD 86 00         CALL DRAW_CIRCLE
 37   0051 CD 86 00         CALL DRAW_CIRCLE
 38   0054 CD 86 00         CALL DRAW_CIRCLE
 39   0057 01 C3 EF         LD BC, $EFC3
 40   005A 09               ADD HL, BC
 41   005B C9               RET
 42   005C
 43   005C              VERIFY_4000:
 44   005C 3E 41            LD A, $41
 45   005E BC               CP H
 46   005F CC 69 00         CALL Z, SET_4100
 47   0062 3E 49            LD A, $49
 48   0064 BC               CP H
 49   0065 CC 6C 00         CALL Z, SET_5000
 50   0068 C9               RET
 51   0069
 52   0069              SET_4100:
 53   0069 26 48            LD H, $48
 54   006B C9               RET
 55   006C
 56   006C              SET_5000:
 57   006C 26 50            LD H, $50
 58   006E C9               RET
 59   006F
 60   006F              SET_COLUMN_COLOR:
 61   006F CD 16 02         CALL SET_C_COLOR_E
 62   0072 CD 16 02         CALL SET_C_COLOR_E
 63   0075 CD 16 02         CALL SET_C_COLOR_E
 64   0078 CD 16 02         CALL SET_C_COLOR_E
 65   007B CD 16 02         CALL SET_C_COLOR_E
 66   007E CD 16 02         CALL SET_C_COLOR_E
 67   0081 01 C3 FD         LD BC, $FDC3
 68   0084 09               ADD HL, BC
 69   0085 C9               RET
 70   0086
 71   0086              DRAW_CIRCLE:
 72   0086
 73   0086 01 1D 00         LD BC, $001D
 74   0089
 75   0089 CD B1 00         CALL UL_CIRCLE
 76   008C CD D7 00         CALL UM_CIRCLE
 77   008F CD FA 00         CALL UR_CIRCLE
 78   0092
 79   0092 09               ADD HL, BC
 80   0093 CD 5C 00         CALL VERIFY_4000
 81   0096
 82   0096 CD 20 01         CALL ML_CIRCLE
 83   0099 CD 43 01         CALL MM_CIRCLE
 84   009C CD 62 01         CALL MR_CIRCLE
 85   009F
 86   009F 09               ADD HL, BC
 87   00A0 CD 5C 00         CALL VERIFY_4000
 88   00A3
 89   00A3 CD 85 01         CALL LL_CIRCLE
 90   00A6 CD AB 01         CALL LM_CIRCLE
 91   00A9 CD CE 01         CALL LR_CIRCLE
 92   00AC
 93   00AC 09               ADD HL, BC
 94   00AD CD 5C 00         CALL VERIFY_4000
 95   00B0
 96   00B0 C9               RET
 97   00B1
 98   00B1              UL_CIRCLE:
 99   00B1 3E 00            LD A, %00000000
100   00B3 77               LD (HL), A
101   00B4 CD F4 01         CALL INC_AND_LOAD_H
102   00B7 3E 03            LD A, %00000011
103   00B9 CD F4 01         CALL INC_AND_LOAD_H
104   00BC 3E 07            LD A, %00000111
105   00BE CD F4 01         CALL INC_AND_LOAD_H
106   00C1 3E 0F            LD A, %00001111
107   00C3 CD F4 01         CALL INC_AND_LOAD_H
108   00C6 3E 1F            LD A, %00011111
109   00C8 CD F4 01         CALL INC_AND_LOAD_H
110   00CB 3E 3F            LD A, %00111111
111   00CD CD F4 01         CALL INC_AND_LOAD_H
112   00D0 CD F4 01         CALL INC_AND_LOAD_H
113   00D3 CD FE 01         CALL SETBACK_HL
114   00D6 C9               RET
115   00D7
116   00D7              UM_CIRCLE:
117   00D7 3E 00            LD A, %00000000
118   00D9 25               DEC H
119   00DA CD F4 01         CALL INC_AND_LOAD_H
120   00DD 3E 7E            LD A, %01111110
121   00DF CD F4 01         CALL INC_AND_LOAD_H
122   00E2 3E FF            LD A, %11111111
123   00E4 CD F4 01         CALL INC_AND_LOAD_H
124   00E7 CD F4 01         CALL INC_AND_LOAD_H
125   00EA CD F4 01         CALL INC_AND_LOAD_H
126   00ED CD F4 01         CALL INC_AND_LOAD_H
127   00F0 CD F4 01         CALL INC_AND_LOAD_H
128   00F3 CD F4 01         CALL INC_AND_LOAD_H
129   00F6 CD FE 01         CALL SETBACK_HL
130   00F9 C9               RET
131   00FA
132   00FA              UR_CIRCLE:
133   00FA 3E 00            LD A, %00000000
134   00FC 77               LD (HL), A
135   00FD CD F4 01         CALL INC_AND_LOAD_H
136   0100 3E C0            LD A, %11000000
137   0102 CD F4 01         CALL INC_AND_LOAD_H
138   0105 3E E0            LD A, %11100000
139   0107 CD F4 01         CALL INC_AND_LOAD_H
140   010A 3E F0            LD A, %11110000
141   010C CD F4 01         CALL INC_AND_LOAD_H
142   010F 3E F8            LD A, %11111000
143   0111 CD F4 01         CALL INC_AND_LOAD_H
144   0114 3E FC            LD A, %11111100
145   0116 CD F4 01         CALL INC_AND_LOAD_H
146   0119 CD F4 01         CALL INC_AND_LOAD_H
147   011C CD FE 01         CALL SETBACK_HL
148   011F C9               RET
149   0120
150   0120              ML_CIRCLE:
151   0120 3E 3F            LD A, %00111111
152   0122 25               DEC H
153   0123 CD F4 01         CALL INC_AND_LOAD_H
154   0126 3E 7F            LD A, %01111111
155   0128 CD F4 01         CALL INC_AND_LOAD_H
156   012B CD F4 01         CALL INC_AND_LOAD_H
157   012E CD F4 01         CALL INC_AND_LOAD_H
158   0131 CD F4 01         CALL INC_AND_LOAD_H
159   0134 CD F4 01         CALL INC_AND_LOAD_H
160   0137 CD F4 01         CALL INC_AND_LOAD_H
161   013A 3E 3F            LD A, %00111111
162   013C CD F4 01         CALL INC_AND_LOAD_H
163   013F CD FE 01         CALL SETBACK_HL
164   0142 C9               RET
165   0143
166   0143              MM_CIRCLE:
167   0143 3E FF            LD A, %11111111
168   0145 25               DEC H
169   0146 CD F4 01         CALL INC_AND_LOAD_H
170   0149 CD F4 01         CALL INC_AND_LOAD_H
171   014C CD F4 01         CALL INC_AND_LOAD_H
172   014F CD F4 01         CALL INC_AND_LOAD_H
173   0152 CD F4 01         CALL INC_AND_LOAD_H
174   0155 CD F4 01         CALL INC_AND_LOAD_H
175   0158 CD F4 01         CALL INC_AND_LOAD_H
176   015B CD F4 01         CALL INC_AND_LOAD_H
177   015E CD FE 01         CALL SETBACK_HL
178   0161 C9               RET
179   0162
180   0162              MR_CIRCLE:
181   0162 3E FC            LD A, %11111100
182   0164 25               DEC H
183   0165 CD F4 01         CALL INC_AND_LOAD_H
184   0168 3E FE            LD A, %11111110
185   016A CD F4 01         CALL INC_AND_LOAD_H
186   016D CD F4 01         CALL INC_AND_LOAD_H
187   0170 CD F4 01         CALL INC_AND_LOAD_H
188   0173 CD F4 01         CALL INC_AND_LOAD_H
189   0176 CD F4 01         CALL INC_AND_LOAD_H
190   0179 CD F4 01         CALL INC_AND_LOAD_H
191   017C 3E FC            LD A, %11111100
192   017E CD F4 01         CALL INC_AND_LOAD_H
193   0181 CD FE 01         CALL SETBACK_HL
194   0184 C9               RET
195   0185
196   0185              LL_CIRCLE:
197   0185 3E 3F            LD A, %00111111
198   0187 77               LD (HL), A
199   0188 CD F4 01         CALL INC_AND_LOAD_H
200   018B 3E 1F            LD A, %00011111
201   018D CD F4 01         CALL INC_AND_LOAD_H
202   0190 3E 0F            LD A, %00001111
203   0192 CD F4 01         CALL INC_AND_LOAD_H
204   0195 3E 07            LD A, %00000111
205   0197 CD F4 01         CALL INC_AND_LOAD_H
206   019A 3E 03            LD A, %00000011
207   019C CD F4 01         CALL INC_AND_LOAD_H
208   019F 3E 00            LD A, %00000000
209   01A1 CD F4 01         CALL INC_AND_LOAD_H
210   01A4 CD F4 01         CALL INC_AND_LOAD_H
211   01A7 CD FE 01         CALL SETBACK_HL
212   01AA C9               RET
213   01AB
214   01AB              LM_CIRCLE:
215   01AB 3E FF            LD A, %11111111
216   01AD 25               DEC H
217   01AE CD F4 01         CALL INC_AND_LOAD_H
218   01B1 CD F4 01         CALL INC_AND_LOAD_H
219   01B4 CD F4 01         CALL INC_AND_LOAD_H
220   01B7 CD F4 01         CALL INC_AND_LOAD_H
221   01BA CD F4 01         CALL INC_AND_LOAD_H
222   01BD CD F4 01         CALL INC_AND_LOAD_H
223   01C0 3E 7E            LD A, %01111110
224   01C2 CD F4 01         CALL INC_AND_LOAD_H
225   01C5 3E 00            LD A, %00000000
226   01C7 CD F4 01         CALL INC_AND_LOAD_H
227   01CA CD FE 01         CALL SETBACK_HL
228   01CD C9               RET
229   01CE
230   01CE              LR_CIRCLE:
231   01CE 3E FC            LD A, %11111100
232   01D0 77               LD (HL), A
233   01D1 CD F4 01         CALL INC_AND_LOAD_H
234   01D4 3E F8            LD A, %11111000
235   01D6 CD F4 01         CALL INC_AND_LOAD_H
236   01D9 3E F0            LD A, %11110000
237   01DB CD F4 01         CALL INC_AND_LOAD_H
238   01DE 3E E0            LD A, %11100000
239   01E0 CD F4 01         CALL INC_AND_LOAD_H
240   01E3 3E C0            LD A, %11000000
241   01E5 CD F4 01         CALL INC_AND_LOAD_H
242   01E8 3E 00            LD A, %00000000
243   01EA CD F4 01         CALL INC_AND_LOAD_H
244   01ED CD F4 01         CALL INC_AND_LOAD_H
245   01F0 CD FE 01         CALL SETBACK_HL
246   01F3 C9               RET
247   01F4
248   01F4              INC_AND_LOAD_H:
249   01F4 50 59            LD DE, BC
250   01F6 01 00 01         LD BC, $0100
251   01F9 09               ADD HL, BC
252   01FA 77               LD (HL), A
253   01FB 42 4B            LD BC, DE
254   01FD C9               RET
255   01FE
256   01FE              SETBACK_HL:
257   01FE 50 59            LD DE, BC
258   0200 01 01 F9         LD BC, $F901
259   0203 09               ADD HL, BC
260   0204 42 4B            LD BC, DE
261   0206 C9               RET
262   0207
263   0207              INC_HL_3X3:
264   0207 77               LD (HL), A
265   0208 50 59            LD DE, BC
266   020A 01 01 00         LD BC, 1
267   020D 09               ADD HL, BC
268   020E 77               LD (HL), A
269   020F 09               ADD HL, BC
270   0210 77               LD (HL), A
271   0211 01 1E 00         LD BC, 30
272   0214 09               ADD HL, BC
273   0215 C9               RET
274   0216
275   0216              SET_C_COLOR_E:
276   0216 3E 0F            LD A, 1*8+7
277   0218 CD 07 02         CALL INC_HL_3X3
278   021B CD 07 02         CALL INC_HL_3X3
279   021E CD 07 02         CALL INC_HL_3X3
280   0221 C9               RET
281   0222
282   0222              SET_C_COLOR_R:
283   0222 3E 0A            LD A, 1*8+2
284   0224 CD 07 02         CALL INC_HL_3X3
285   0227 CD 07 02         CALL INC_HL_3X3
286   022A CD 07 02         CALL INC_HL_3X3
287   022D C9               RET
288   022E
289   022E              SET_C_COLOR_Y:
290   022E 3E 0E            LD A, 1*8+6
291   0230 CD 07 02         CALL INC_HL_3X3
292   0233 CD 07 02         CALL INC_HL_3X3
293   0236 CD 07 02         CALL INC_HL_3X3
294   0239 C9               RET
295   023A
296   023A              SET_PRED ; Rutina para indicar que el jugador actual es el rojo
297   023A 21 42 58         LD HL, $5842
298   023D 3E 02            LD A, 2
299   023F CD 07 02         CALL INC_HL_3X3
300   0242 CD 07 02         CALL INC_HL_3X3
301   0245 CD 07 02         CALL INC_HL_3X3
302   0248 21 42 58         LD HL, $5842
303   024B CD 6A 02         CALL CONVERT_58_2_40
304   024E CD 86 00         CALL DRAW_CIRCLE
305   0251 C9               RET
306   0252
307   0252              SET_PYEL ; Rutina para indicar que el jugador actual es el amarillo
308   0252 21 5A 58         LD HL, $585A
309   0255 3E 06            LD A, 6
310   0257 CD 07 02         CALL INC_HL_3X3
311   025A CD 07 02         CALL INC_HL_3X3
312   025D CD 07 02         CALL INC_HL_3X3
313   0260 21 5A 58         LD HL, $585A
314   0263 CD 6A 02         CALL CONVERT_58_2_40
315   0266 CD 86 00         CALL DRAW_CIRCLE
316   0269 C9               RET
317   026A
318   026A              CONVERT_58_2_40
319   026A 01 00 E8         LD BC, $E800
320   026D 09               ADD HL, BC
321   026E F1               POP AF
321   026F D1             POP DE
321   0270 E1             POP HL
321   0271 C1             POP BC
322   0272 C9               RET
# file closed: C:\Users\luisx\OneDrive - UFV\curso2\AOC\ejerYpruebas\L34-Parte1\pantallaJuego.asm
